<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¯åº“ç®¡ç† - Persona Undercover</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.3s ease-out'
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' }
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' }
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- å¯¼èˆªæ  -->
    <nav class="bg-white shadow-lg">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center space-x-2">
                    <div class="w-8 h-8 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-full flex items-center justify-center">
                        <span class="text-white font-bold text-sm">ğŸ“š</span>
                    </div>
                    <h1 class="text-2xl font-bold text-gray-800">è¯åº“ç®¡ç†</h1>
                </div>
                <div class="flex space-x-4">
                    <a href="/undercover" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition">
                        ğŸ­ è¿”å›è°æ˜¯å§åº•
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto px-4 py-8">
        <!-- åŠŸèƒ½æŒ‰é’®åŒºåŸŸ -->
        <div class="mb-8">
            <div class="flex flex-wrap gap-4">
                <button onclick="showAddWordForm()" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-medium transition flex items-center space-x-2">
                    <span>â•</span>
                    <span>æ·»åŠ è¯æ±‡å¯¹</span>
                </button>
                <button onclick="showBatchAddForm()" class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-medium transition flex items-center space-x-2">
                    <span>ğŸ“</span>
                    <span>æ‰¹é‡æ·»åŠ </span>
                </button>
                <button onclick="showGenerateForm()" class="bg-purple-500 hover:bg-purple-600 text-white px-6 py-3 rounded-lg font-medium transition flex items-center space-x-2">
                    <span>ğŸ¤–</span>
                    <span>AIç”Ÿæˆ</span>
                </button>
                <button onclick="loadWords()" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium transition flex items-center space-x-2">
                    <span>ğŸ”„</span>
                    <span>åˆ·æ–°</span>
                </button>
            </div>
        </div>

        <!-- æ·»åŠ å•ä¸ªè¯æ±‡å¯¹è¡¨å• -->
        <div id="addWordForm" class="hidden mb-8">
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-4">æ·»åŠ æ–°è¯æ±‡å¯¹</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">å¹³æ°‘è¯</label>
                        <input type="text" id="publicWord" placeholder="è¯·è¾“å…¥å¹³æ°‘è¯" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">å§åº•è¯</label>
                        <input type="text" id="undercoverWord" placeholder="è¯·è¾“å…¥å§åº•è¯" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">éš¾åº¦</label>
                        <select id="difficulty" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="easy">ç®€å•</option>
                            <option value="medium" selected>ä¸­ç­‰</option>
                            <option value="hard">å›°éš¾</option>
                        </select>
                    </div>
                </div>
                <div class="flex space-x-4 mt-4">
                    <button onclick="addWord()" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg font-medium transition">æ·»åŠ </button>
                    <button onclick="hideAddWordForm()" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg font-medium transition">å–æ¶ˆ</button>
                </div>
            </div>
        </div>

        <!-- æ‰¹é‡æ·»åŠ è¡¨å• -->
        <div id="batchAddForm" class="hidden mb-8">
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-4">æ‰¹é‡æ·»åŠ è¯æ±‡å¯¹</h3>
                <p class="text-gray-600 mb-4">è¯·æŒ‰ç…§ä»¥ä¸‹æ ¼å¼è¾“å…¥ï¼Œæ¯è¡Œä¸€å¯¹è¯æ±‡ï¼šå¹³æ°‘è¯,å§åº•è¯,éš¾åº¦ï¼ˆeasy/medium/hardï¼‰</p>
                <textarea id="batchWords" rows="10" placeholder="ä¾‹å¦‚ï¼š\nè‹¹æœ,æ©™å­,easy\nç«é”…,æ±¤é”…,medium\né“…ç¬”,æ¯›ç¬”,hard" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"></textarea>
                <div class="flex space-x-4 mt-4">
                    <button onclick="batchAddWords()" class="bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg font-medium transition">æ‰¹é‡æ·»åŠ </button>
                    <button onclick="hideBatchAddForm()" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg font-medium transition">å–æ¶ˆ</button>
                </div>
            </div>
        </div>

        <!-- AIç”Ÿæˆè¡¨å• -->
        <div id="generateForm" class="hidden mb-8">
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-4">AIç”Ÿæˆè¯æ±‡å¯¹</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ä¸»é¢˜</label>
                        <input type="text" id="generateTheme" value="æ—¥å¸¸ç‰©å“" placeholder="è¯·è¾“å…¥ä¸»é¢˜" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">éš¾åº¦</label>
                        <select id="generateDifficulty" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            <option value="easy">ç®€å•</option>
                            <option value="medium" selected>ä¸­ç­‰</option>
                            <option value="hard">å›°éš¾</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">æ•°é‡</label>
                        <input type="number" id="generateCount" value="5" min="1" max="20" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                    </div>
                </div>
                <div class="flex space-x-4 mt-4">
                    <button onclick="generateWords()" class="bg-purple-500 hover:bg-purple-600 text-white px-6 py-2 rounded-lg font-medium transition">ç”Ÿæˆ</button>
                    <button onclick="hideGenerateForm()" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg font-medium transition">å–æ¶ˆ</button>
                </div>
                <div id="generateResult" class="hidden mt-4">
                    <h4 class="text-lg font-bold text-gray-800 mb-2">ç”Ÿæˆç»“æœ</h4>
                    <div id="generatedWords" class="space-y-2"></div>
                    <button onclick="saveGeneratedWords()" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg font-medium transition mt-4">ä¿å­˜åˆ°è¯åº“</button>
                </div>
            </div>
        </div>

        <!-- è¯åº“åˆ—è¡¨ -->
        <div class="bg-white rounded-lg shadow-lg">
            <div class="p-6 border-b border-gray-200">
                <h2 class="text-2xl font-bold text-gray-800">è¯åº“åˆ—è¡¨</h2>
                <p class="text-gray-600 mt-2">å½“å‰è¯åº“ä¸­çš„æ‰€æœ‰è¯æ±‡å¯¹</p>
            </div>
            
            <!-- ç­›é€‰å™¨ -->
            <div class="p-4 border-b border-gray-200">
                <div class="flex flex-wrap gap-4 items-center">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">éš¾åº¦ç­›é€‰</label>
                        <select id="difficultyFilter" onchange="filterWords()" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="all">å…¨éƒ¨</option>
                            <option value="easy">ç®€å•</option>
                            <option value="medium">ä¸­ç­‰</option>
                            <option value="hard">å›°éš¾</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">æœç´¢</label>
                        <input type="text" id="searchInput" onkeyup="filterWords()" placeholder="æœç´¢è¯æ±‡..." class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                </div>
            </div>

            <div id="wordsContainer" class="p-6">
                <div class="text-center py-8">
                    <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"></div>
                    <p class="text-gray-600 mt-4">åŠ è½½ä¸­...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- æ¶ˆæ¯æç¤º -->
    <div id="messageContainer" class="fixed top-4 right-4 z-50"></div>

    <script>
        let allWords = [];
        let generatedWordPairs = [];

        // é¡µé¢åŠ è½½æ—¶è·å–è¯åº“
        document.addEventListener('DOMContentLoaded', function() {
            loadWords();
        });

        // åŠ è½½è¯åº“
        async function loadWords() {
            try {
                const response = await fetch('/api/game/words');
                const words = await response.json();
                allWords = words;
                displayWords(words);
            } catch (error) {
                showMessage('åŠ è½½è¯åº“å¤±è´¥: ' + error.message, 'error');
            }
        }

        // æ˜¾ç¤ºè¯åº“
        function displayWords(words) {
            const container = document.getElementById('wordsContainer');
            
            if (words.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-8">
                        <p class="text-gray-600">æš‚æ— è¯æ±‡å¯¹</p>
                    </div>
                `;
                return;
            }

            const wordsHtml = words.map(word => {
                const difficultyColor = {
                    'easy': 'bg-green-100 text-green-800',
                    'medium': 'bg-yellow-100 text-yellow-800',
                    'hard': 'bg-red-100 text-red-800'
                }[word.difficulty];

                const difficultyText = {
                    'easy': 'ç®€å•',
                    'medium': 'ä¸­ç­‰',
                    'hard': 'å›°éš¾'
                }[word.difficulty];

                return `
                    <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <div class="grid grid-cols-2 gap-4 mb-2">
                                    <div>
                                        <span class="text-sm text-gray-600">å¹³æ°‘è¯:</span>
                                        <p class="font-medium text-gray-800">${word.public_word}</p>
                                    </div>
                                    <div>
                                        <span class="text-sm text-gray-600">å§åº•è¯:</span>
                                        <p class="font-medium text-gray-800">${word.undercover_word}</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="px-2 py-1 text-xs rounded-full ${difficultyColor}">${difficultyText}</span>
                                    <span class="text-xs text-gray-500">${new Date(word.created_at).toLocaleDateString()}</span>
                                </div>
                            </div>
                            <button onclick="deleteWord(${word.id})" class="text-red-500 hover:text-red-700 transition ml-4">
                                ğŸ—‘ï¸
                            </button>
                        </div>
                    </div>
                `;
            }).join('');

            container.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    ${wordsHtml}
                </div>
            `;
        }

        // ç­›é€‰è¯æ±‡
        function filterWords() {
            const difficultyFilter = document.getElementById('difficultyFilter').value;
            const searchInput = document.getElementById('searchInput').value.toLowerCase();
            
            let filteredWords = allWords;
            
            if (difficultyFilter !== 'all') {
                filteredWords = filteredWords.filter(word => word.difficulty === difficultyFilter);
            }
            
            if (searchInput) {
                filteredWords = filteredWords.filter(word => 
                    word.public_word.toLowerCase().includes(searchInput) ||
                    word.undercover_word.toLowerCase().includes(searchInput)
                );
            }
            
            displayWords(filteredWords);
        }

        // æ˜¾ç¤ºæ·»åŠ è¡¨å•
        function showAddWordForm() {
            document.getElementById('addWordForm').classList.remove('hidden');
            hideOtherForms('addWordForm');
        }

        function hideAddWordForm() {
            document.getElementById('addWordForm').classList.add('hidden');
        }

        // æ˜¾ç¤ºæ‰¹é‡æ·»åŠ è¡¨å•
        function showBatchAddForm() {
            document.getElementById('batchAddForm').classList.remove('hidden');
            hideOtherForms('batchAddForm');
        }

        function hideBatchAddForm() {
            document.getElementById('batchAddForm').classList.add('hidden');
        }

        // æ˜¾ç¤ºç”Ÿæˆè¡¨å•
        function showGenerateForm() {
            document.getElementById('generateForm').classList.remove('hidden');
            hideOtherForms('generateForm');
        }

        function hideGenerateForm() {
            document.getElementById('generateForm').classList.add('hidden');
        }

        // éšè—å…¶ä»–è¡¨å•
        function hideOtherForms(except) {
            const forms = ['addWordForm', 'batchAddForm', 'generateForm'];
            forms.forEach(form => {
                if (form !== except) {
                    document.getElementById(form).classList.add('hidden');
                }
            });
        }

        // æ·»åŠ å•ä¸ªè¯æ±‡å¯¹
        async function addWord() {
            const publicWord = document.getElementById('publicWord').value.trim();
            const undercoverWord = document.getElementById('undercoverWord').value.trim();
            const difficulty = document.getElementById('difficulty').value;

            if (!publicWord || !undercoverWord) {
                showMessage('è¯·å¡«å†™å®Œæ•´çš„è¯æ±‡å¯¹', 'error');
                return;
            }

            try {
                const response = await fetch('/api/game/words', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        public_word: publicWord,
                        undercover_word: undercoverWord,
                        difficulty: difficulty
                    })
                });

                const result = await response.json();

                // æ£€æŸ¥æ˜¯å¦æœ‰å®‰å…¨è­¦å‘Š
                if (result.security_warning) {
                    showMessage(result.message || 'æ£€æµ‹åˆ°ä¸å®‰å…¨çš„è¾“å…¥å†…å®¹ï¼Œè¯·é‡æ–°è¾“å…¥', 'error');
                    return;
                }

                if (response.ok) {
                    showMessage('è¯æ±‡å¯¹æ·»åŠ æˆåŠŸ', 'success');
                    document.getElementById('publicWord').value = '';
                    document.getElementById('undercoverWord').value = '';
                    hideAddWordForm();
                    loadWords();
                } else {
                    showMessage(result.error || 'æ·»åŠ å¤±è´¥', 'error');
                }
            } catch (error) {
                showMessage('æ·»åŠ å¤±è´¥: ' + error.message, 'error');
            }
        }

        // æ‰¹é‡æ·»åŠ è¯æ±‡å¯¹
        async function batchAddWords() {
            const batchText = document.getElementById('batchWords').value.trim();
            
            if (!batchText) {
                showMessage('è¯·è¾“å…¥è¯æ±‡å¯¹æ•°æ®', 'error');
                return;
            }

            const lines = batchText.split('\n').filter(line => line.trim());
            const wordPairs = [];

            for (let i = 0; i < lines.length; i++) {
                const parts = lines[i].split(',').map(part => part.trim());
                if (parts.length >= 2) {
                    wordPairs.push({
                        public_word: parts[0],
                        undercover_word: parts[1],
                        difficulty: parts[2] || 'medium'
                    });
                }
            }

            if (wordPairs.length === 0) {
                showMessage('æ²¡æœ‰æœ‰æ•ˆçš„è¯æ±‡å¯¹æ•°æ®', 'error');
                return;
            }

            try {
                const response = await fetch('/api/game/words/batch', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        word_pairs: wordPairs
                    })
                });

                const result = await response.json();

                // æ£€æŸ¥æ˜¯å¦æœ‰å®‰å…¨è­¦å‘Š
                if (result.security_warning) {
                    showMessage(result.message || 'æ£€æµ‹åˆ°ä¸å®‰å…¨çš„è¾“å…¥å†…å®¹ï¼Œè¯·é‡æ–°è¾“å…¥', 'error');
                    return;
                }

                if (response.ok) {
                    showMessage(`æ‰¹é‡æ·»åŠ å®Œæˆï¼šæˆåŠŸ${result.added_count}ä¸ªï¼Œè·³è¿‡${result.skipped_count}ä¸ª`, 'success');
                    if (result.errors.length > 0) {
                        console.log('é”™è¯¯è¯¦æƒ…:', result.errors);
                    }
                    document.getElementById('batchWords').value = '';
                    hideBatchAddForm();
                    loadWords();
                } else {
                    showMessage(result.error || 'æ‰¹é‡æ·»åŠ å¤±è´¥', 'error');
                }
            } catch (error) {
                showMessage('æ‰¹é‡æ·»åŠ å¤±è´¥: ' + error.message, 'error');
            }
        }

        // AIç”Ÿæˆè¯æ±‡å¯¹
        async function generateWords() {
            const theme = document.getElementById('generateTheme').value.trim();
            const difficulty = document.getElementById('generateDifficulty').value;
            const count = parseInt(document.getElementById('generateCount').value);

            if (!theme) {
                showMessage('è¯·è¾“å…¥ä¸»é¢˜', 'error');
                return;
            }

            try {
                showMessage('AIæ­£åœ¨ç”Ÿæˆè¯æ±‡å¯¹ï¼Œè¯·ç¨å€™...', 'info');
                
                const response = await fetch('/api/game/words/generate', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        theme: theme,
                        difficulty: difficulty,
                        count: count
                    })
                });

                const result = await response.json();

                // æ£€æŸ¥æ˜¯å¦æœ‰å®‰å…¨è­¦å‘Š
                if (result.security_warning) {
                    showMessage(result.message || 'æ£€æµ‹åˆ°ä¸å®‰å…¨çš„è¾“å…¥å†…å®¹ï¼Œè¯·é‡æ–°è¾“å…¥', 'error');
                    return;
                }

                if (response.ok) {
                    generatedWordPairs = result.word_pairs;
                    displayGeneratedWords(result.word_pairs);
                    showMessage(`æˆåŠŸç”Ÿæˆ${result.word_pairs.length}å¯¹è¯æ±‡`, 'success');
                } else {
                    showMessage(result.error || 'AIç”Ÿæˆå¤±è´¥', 'error');
                }
            } catch (error) {
                showMessage('AIç”Ÿæˆå¤±è´¥: ' + error.message, 'error');
            }
        }

        // æ˜¾ç¤ºç”Ÿæˆçš„è¯æ±‡å¯¹
        function displayGeneratedWords(wordPairs) {
            const container = document.getElementById('generatedWords');
            const resultDiv = document.getElementById('generateResult');
            
            const wordsHtml = wordPairs.map((pair, index) => `
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                    <div class="flex-1">
                        <span class="font-medium">${pair.public_word}</span>
                        <span class="text-gray-500 mx-2">vs</span>
                        <span class="font-medium">${pair.undercover_word}</span>
                        <span class="text-xs text-gray-500 ml-2">(${pair.difficulty})</span>
                    </div>
                    <button onclick="removeGeneratedWord(${index})" class="text-red-500 hover:text-red-700 transition">
                        âŒ
                    </button>
                </div>
            `).join('');
            
            container.innerHTML = wordsHtml;
            resultDiv.classList.remove('hidden');
        }

        // ç§»é™¤ç”Ÿæˆçš„è¯æ±‡å¯¹
        function removeGeneratedWord(index) {
            generatedWordPairs.splice(index, 1);
            displayGeneratedWords(generatedWordPairs);
        }

        // ä¿å­˜ç”Ÿæˆçš„è¯æ±‡å¯¹
        async function saveGeneratedWords() {
            if (generatedWordPairs.length === 0) {
                showMessage('æ²¡æœ‰å¯ä¿å­˜çš„è¯æ±‡å¯¹', 'error');
                return;
            }

            try {
                const response = await fetch('/api/game/words/batch', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        word_pairs: generatedWordPairs
                    })
                });

                const result = await response.json();

                // æ£€æŸ¥æ˜¯å¦æœ‰å®‰å…¨è­¦å‘Š
                if (result.security_warning) {
                    showMessage(result.message || 'æ£€æµ‹åˆ°ä¸å®‰å…¨çš„å†…å®¹ï¼Œæ— æ³•ä¿å­˜', 'error');
                    return;
                }

                if (response.ok) {
                    showMessage(`æˆåŠŸä¿å­˜${result.added_count}å¯¹è¯æ±‡åˆ°è¯åº“`, 'success');
                    generatedWordPairs = [];
                    document.getElementById('generateResult').classList.add('hidden');
                    hideGenerateForm();
                    loadWords();
                } else {
                    showMessage(result.error || 'ä¿å­˜å¤±è´¥', 'error');
                }
            } catch (error) {
                showMessage('ä¿å­˜å¤±è´¥: ' + error.message, 'error');
            }
        }

        // åˆ é™¤è¯æ±‡å¯¹
        async function deleteWord(wordId) {
            if (!confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªè¯æ±‡å¯¹å—ï¼Ÿ')) {
                return;
            }

            try {
                const response = await fetch(`/api/game/words/${wordId}`, {
                    method: 'DELETE'
                });

                const result = await response.json();

                if (response.ok) {
                    showMessage('è¯æ±‡å¯¹åˆ é™¤æˆåŠŸ', 'success');
                    loadWords();
                } else {
                    showMessage(result.error || 'åˆ é™¤å¤±è´¥', 'error');
                }
            } catch (error) {
                showMessage('åˆ é™¤å¤±è´¥: ' + error.message, 'error');
            }
        }

        // æ˜¾ç¤ºæ¶ˆæ¯
        function showMessage(message, type = 'info') {
            const container = document.getElementById('messageContainer');
            const messageId = 'msg-' + Date.now();
            
            const colors = {
                'success': 'bg-green-500',
                'error': 'bg-red-500',
                'info': 'bg-blue-500',
                'warning': 'bg-yellow-500'
            };
            
            const messageDiv = document.createElement('div');
            messageDiv.id = messageId;
            messageDiv.className = `${colors[type]} text-white px-6 py-3 rounded-lg shadow-lg mb-2 animate-slide-up`;
            messageDiv.innerHTML = `
                <div class="flex items-center justify-between">
                    <span>${message}</span>
                    <button onclick="removeMessage('${messageId}')" class="ml-4 text-white hover:text-gray-200">
                        âœ•
                    </button>
                </div>
            `;
            
            container.appendChild(messageDiv);
            
            // 3ç§’åè‡ªåŠ¨ç§»é™¤
            setTimeout(() => {
                removeMessage(messageId);
            }, 3000);
        }

        // ç§»é™¤æ¶ˆæ¯
        function removeMessage(messageId) {
            const messageDiv = document.getElementById(messageId);
            if (messageDiv) {
                messageDiv.remove();
            }
        }
    </script>
</body>
</html>